# 구현 계획 체크리스트 (SRS 기준)

> 기준 문서: `docs/001 요구사항/SRS.md`

## 0) 공통/아키텍처
- [x] 로컬 실행형 앱 아키텍처 확정(프론트/백/로컬 DB/파일 저장 경로 포함)
- [x] 4개 레이어(`domain/application/presentation/infrastructure`)에 애그리거트 중심 패키지 구조 적용
- [ ] STT → LLM → TTS 체인 기반 파이프라인 설계(디버깅/로그 포함)
- [x] 모델/키/룰북/질문/오답노트 상태를 관리하는 데이터 모델 정의
- [ ] 성능 측정 지표 수집(p95, 실패율 등) 로깅 포맷 정의

## 1) 챗봇 핵심 피드백
- [x] 피드백 출력 포맷 고정
  - [x] 요약 1~2문장
  - [x] 교정 포인트 3개(문법/표현/논리 중 최소 2종 포함)
  - [x] 개선 예시 답변 1개(사용자 답변 길이의 0.8~1.2배)
  - [x] 룰북 근거 1개 이상(있을 때만)
- [ ] 즉시 피드백 모드: 답변 종료 → 피드백 표시 p95 ≤ 10초
- [x] 피드백 항목 누락률 0%(필수 4종 구성 보장)

## 2) STT (Speech-to-Text)
- [x] `audio/transcriptions`/`audio/translations` 연동
- [ ] 모델 선택(비실시간 업로드 STT): `gpt-4o-mini-transcribe`, `gpt-4o-transcribe`, `gpt-4o-transcribe-diarize`, `whisper-1` 등
- [x] 업로드 파일 제한 25MB 처리(사전 검증)
- [x] 서버 VAD 파라미터 기본값 적용
- [x] STT 스트리밍(SSE) 지원 여부 반영(whisper-1 제외)
- [x] 녹음 시작/정지 UI 및 로직
- [x] 녹음 최대 180초 제한
- [x] STT 실패 시 재시도(최대 2회)
- [ ] STT 결과 반환 p95 ≤ 6초(업로드 완료 기준)
- [ ] STT 실패율 ≤ 2%(일 기준) 측정/알림

## 3) LLM (텍스트 응답 생성)
- [ ] STT 세그먼트 누적 → 대화 상태 관리
- [ ] 시스템 프롬프트/정책 필터/툴 호출 적용 지점 정의
- [x] 피드백 언어(한국어/영어) 반영
- [x] 룰북(RAG) 컨텍스트 주입 로직 구현

## 4) TTS (Text-to-Speech)
- [x] `audio/speech` 연동
- [x] 모델: `gpt-4o-mini-tts`
- [x] 스트리밍 출력 지원(생성 완료 전 재생)
- [x] 보이스 목록 선택 UI/설정 저장

## 5) 학습 룰북 (RAG)
- [x] 룰북 파일 업로드(로컬 저장, 형식: .md)
- [x] 업로드 시 텍스트 추출 및 인덱싱
- [x] 룰북 활성/비활성 토글
- [ ] 업로드 성공 후 3초 내 목록 표시(p95 ≤ 3초)
- [x] Notion → .md 추출 가이드 문구 제공

## 6) 질문 리스트
- [x] 질문 리스트 생성/삭제
- [x] 질문 추가/수정/삭제
- [x] 리스트 내 질문 1~200개 제한
- [ ] “다음 질문” 전환 500ms 이내(p95 ≤ 0.5초)

## 7) 학습 모드 (즉시/연속/모의고사)
- [x] 모드 선택 UI(질문 리스트 화면)
- [x] 즉시 피드백 모드 동작
- [x] 연속 발화 모드 동작
  - [x] N개 질문 후 묶음 피드백(기본 N=3, 설정 1~10)
  - [ ] 묶음 피드백 후 TTS 안내
  - [x] 오답노트 피드백 횟수 누적(+1)
- [x] 모의고사 모드 동작
  - [x] 사전 정의 그룹 순서 + 랜덤 출제
  - [x] 그룹당 사용자 설정 횟수대로 추출
  - [x] 중복 추출 금지
  - [x] 질문 소진 시 건너뛰기
- [x] 모드 변경 즉시 반영(1초 이내)
- [x] 모의고사 모드에서 중간 피드백 생성 0건 보장

## 8) 오답노트 (MongoDB)
- [x] 오답노트 조회 화면
  - [x] 피드백 핵심 255자 이내 요약
  - [x] 오류 태그/패턴 빈도 내림차순 + 횟수 표시
- [x] 오답노트 추가 로직
  - [x] 최근 30개 피드백 큐 관리
  - [x] 중복 피드백 카운트 증가
  - [x] 비중복 피드백 신규 추가
  - [x] 0회 항목 제거

## 9) 피드백 언어 (한국어/영어)
- [x] 언어 토글 UI
- [x] 출력 언어만 변경(입력 언어와 독립)
- [x] 토글 후 다음 피드백부터 100% 적용
- [x] 토글 UI 반영 ≤ 200ms

## 10) 모델 셀렉터 & API Key
- [x] 모델 선택 UI(최소 3개 옵션: GPT/Claude/Gemini)
- [x] 실시간 음성(OpenAI) 모델 기본값: `gpt-realtime-mini` (옵션: `gpt-realtime`)
- [x] 모의고사 최종 피드백 모델 선택 분리(예: OpenAI `gpt-4o-mini`)
- [x] 모델 등급 선택(예: gpt-o3-mini 등)
- [ ] API Key 등록/검증
  - [ ] 형식 검증
  - [ ] 인증 테스트 호출 1회
- [ ] API Key가 클라이언트 로그/크래시 리포트에 포함되지 않도록 보장

## 11) 성능/품질 검증
- [x] 성능 지표 자동 수집(STT/피드백 지연)
- [ ] AC 기준 충족 여부 체크리스트/테스트 케이스 작성
- [ ] 예외/재시도/타임아웃 경로 통합 테스트


102 -
103 -• Questions 3/3 answered
104 -• 로컬 실행형 앱 형태를 무엇으로 할까요?
105 -answer: 데스크톱(Electron+웹 UI) (Recommended)
106 -• 프론트엔드 스택 선호를 알려주세요.
107 -answer: React+Vite (Recommended)
108 -• 백엔드/로컬 서버 스택 선호는?
109 -answer: Spring Boot
110 -
111 -
112 -
113 -• Questions 3/3 answered
114 -• 로컬 DB는 무엇으로 할까요?
115 -answer: SQLite3
116 -• 룰북 RAG 인덱싱은 어떤 방식이 좋을까요?
117 -answer: 임베디드 벡터DB(Chroma/FAISS) (Recommended)
118 -• 데스크톱 배포 대상은?
119 -answer: macOS+Windows (Recommended)
