---

- 메인 룰북
    - AI가 나의 대화를 어떻게 피드백해야 하는 지를 전달하는 룰 북
- 질문 별 룰북
    - 세분화된 정보 전달.
    - 특정 타입 질문에 답변한 대답을 어떻게 피드백할지를 알려주는 룰 북

1. 사용자가 시작 버튼을 누를 시
    1. 메인 프롬프트 전달.
    2. 어떻게 이 흐름을 진행할지도 전달.
2. 매 질문-답변 피드백 사이클마다
    1. 이번 질문에 대한 판단 기준은 어떤 걸 전달해야하는지 찾아 전달.
    2. RAG 활용하여 "뽑힌 질문에 맞는" 적절한 문서 전달
    3. 모델은 해당 기준으로 피드백을 수행할 것을 염두에 두고, 질문 읽어주기.
    4. RAG를 통해, 최대 2개의 문서를 찾아 함께 전달한다.

---

## 질문 별 룰북의 종류

### 1. 질문 주제 별 룰북

- 이야기하고자 하는 주제에 관련된 룰북
- 예: 카페/여행/운동/etc
- 해당 주제에 맞는 피드백을 제공하기 위한 룰북

### 2. 질문 타입 별 룰북

- 이야기하고자 하는 질문 타입에 관련된 룰북
- 예: 묘사/습관/비교/Role Play/etc
- 해당 타입에 대한 피드백을 제공하기 위한 룰북

---

- 질문 그룹 - 질문 (1:n)
- 질문 그룹 - 질문 태그 (1:n)
- 질문 타입 - 질문 (1:n)

## 질문

- 서비스가 realtime TTS로 읽어주길 원하는 텍스트
- 사용자는 이 질문을 바탕으로 대답을 수행한다.

## 질문 그룹

- 오픽에서 등장하는 연속 질문 3연 리스트
- 질문을 문제 유형에 묶어 다루기 위한 단위
- 서비스는 질문 그룹 리스트 내에서 이 질문 그룹을 기준으로 랜덤으로 질문을 추출한다.
- 사용자는 오픽 문제 형태의 3연 질문을 1,2,3번 순서대로 등록해야 한다.

## 질문 그룹 태그

- DB에 질문 그룹을 하나의 개념으로 묶어 저장하기 위한 리스트
- 서비스는 질문을 주어진 태그들을 가진 질문 그룹 중에서 임의로 선택하여 추출한다.
- 사용자는 질문 그룹 태그를 설정하고 나면 해당 태그를 가진 질문 그룹이 몇개 있는지 알 수 있어야 한다.
- 만약 해당 태그를 가진 질문 그룹이 없으면, 해당 질문 그룹 태그를 선택할 수 없어야 한다.

---

# 세션 생성-관리

세션 별로 다루는 메소드가 달라야 함.

#### 공통 제약조건

- 만약 질문을 모두 소진하면, 해당 세션은 종료된다.

## 즉시 피드백 모드

- 질문 - 즉시 답변
- 사용자가 지정한 질문 그룹 태그 내에서 랜덤한 질문 수행
- 질문 그룹 내 각 질문이 끝날 때마다 즉시 피드백 수행
- 해당 피드백은 음성으로 제공 + 텍스트로 저장

#### 사용자가 진행해야 하는 즉시 피드백 설정

- 서비스가 물어봐줬어야 하는 질문 그룹들

## 연속 질문 모드

- 사용자가 지정한 질문 태그 내에서 랜덤한 질문 수행

#### 사용자가 진행해야 하는 연속 질문 설정

- 서비스가 물어봐줬어야 하는 질문 그룹 태그
- 서비스가 피드백을 제공하는 주기 n(질문 그룹 수 n)
    - 해당 질문 수를 전부 소진할 때마다 여태까지 받은 질문 그룹 n개에 대한 피드백 (n개 이상) 받기
    - 서비스는 질문 그룹 n개가 끝날때마다 피드백 n개 이상을 제공함
    - 해당 피드백은 음성이 아닌 텍스트로 받음
- 만약 질문을 모두 소진하면, 연속 질문 세션을 종료한다.

---

## 질문 타입

- 문자열로 표현되는 질문의 타입.
- 습관/비교/Role Play/etc와 같은 문제의 타입을 갖는다.
- 사용자가 자체적으로 구분지을 수 있다.
- 서비스 내에서 분류 시에 적극적으로 사용하지는 않고, 사용자가 구분하기 용으로 사용한다.

---

## 질문 피드백

- 질문 타입(습관/비교/RP/etc)에 맞는 문서 & 질문 그룹(주제)에 맞는 문서 하나씩 RAG로 탐색
- 질문 타입은 질문 자체를 벡터 임베딩으로 탐색하여 문서를 찾는다.
- 질문 그룹(주제)는 질문 자체를 벡터 임베딩으로 탐색하여 문서를 찾는다.
- 서비스는 AI모델에 각각의 문서를 질문과 함께 넘긴다.
- AI 모델은 사용자의 답변을 룰북과 자체적인 영어 지식을 바탕으로 피드백을 수행한다.

---

모의고사 모드(MockExam)은 제거한다.