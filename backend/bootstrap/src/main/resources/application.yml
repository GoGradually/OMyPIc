server:
  port: 4317
  shutdown: graceful

spring:
  application:
    name: omypic-backend
  data:
    mongodb:
      uri: ${OMYPIC_MONGODB_URI:mongodb://localhost:27017/omypic}

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  metrics:
    distribution:
      percentiles-histogram:
        stt.latency: true
        feedback.latency: true
        tts.latency: true
        question.next.latency: true
        realtime.turn.latency: true
        rulebook.upload.latency: true

omypic:
  data-dir: ${OMYPIC_DATA_DIR:${user.home}/OMyPIc}
  stt:
    max-file-bytes: 26214400
    max-duration-seconds: 180
    retry-max: 2
    vad:
      prefix-padding-ms: 300
      silence-duration-ms: 200
      threshold: 0.5
  rag:
    embedding-dim: 384
    max-context-chunks: 4
  feedback:
    summary-max-chars: 400
    example-min-ratio: 0.8
    example-max-ratio: 1.2
    wrongnote-summary-max-chars: 255
  realtime:
    stt-model: gpt-4o-mini-transcribe
    feedback-provider: openai
    feedback-model: gpt-4o-mini
    feedback-language: ko
    tts-voice: alloy
    rest-disabled: true
  integrations:
    openai:
      base-url: ${OMYPIC_OPENAI_BASE_URL:https://api.openai.com}
    gemini:
      base-url: ${OMYPIC_GEMINI_BASE_URL:https://generativelanguage.googleapis.com}
    anthropic:
      base-url: ${OMYPIC_ANTHROPIC_BASE_URL:https://api.anthropic.com}
